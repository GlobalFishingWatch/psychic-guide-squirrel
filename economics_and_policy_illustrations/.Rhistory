mutate(Relative_subsidies = `Subsidies`/abs(`Landed Value`-`Variable Cost`)) %>%
rename(country_name = Country)
consistently_active_vessels <- consistently_active_vessels %>%
left_join(subsidies_by_country %>% select(country_name, Relative_subsidies), by = "country")
consistently_active_vessels <- consistently_active_vessels %>%
left_join(subsidies_by_country %>% select(country_name, Relative_subsidies))
View(consistently_active_vessels)
View(subsidies_by_country)
subsidies_by_country %>%
ggplot()+
geom_bar(aes(x = country, y = Relative_subsides), stat = 'identity')
subsidies_by_country %>%
ggplot()+
geom_bar(aes(x = country_name, y = Relative_subsides), stat = 'identity')
subsidies_by_country %>%
ggplot()+
geom_bar(aes(x = country_name, y = Relative_subsidies), stat = 'identity')
subsidies_by_country %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name), y = Relative_subsidies), stat = 'identity')
subsidies_by_country %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')
subsidies_by_country %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')+
coord_flip()
subsidies_by_country %>%
top_n(100,Relative_subsidies) %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')+
coord_flip()
subsidies_by_country %>%
top_n(10,Relative_subsidies) %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')+
coord_flip()
subsidies_by_country %>%
top_n(50,Relative_subsidies) %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')+
coord_flip()
subsidies_by_country %>%
filter(Relative_subsidies <= 2) %>%
top_n(50,Relative_subsidies) %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')+
coord_flip()
subsidies_by_country %>%
filter(Relative_subsidies <= 1) %>%
top_n(50,Relative_subsidies) %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')+
coord_flip()
subsidies_by_country %>%
filter(Relative_subsidies <= 1) %>%
top_n(50, Landings) %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')+
coord_flip()
subsidies_by_country %>%
filter(Relative_subsidies <= 1) %>%
top_n(25, Landings) %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')+
coord_flip()
subsidies_by_country %>%
filter(Relative_subsidies <= 1) %>%
top_n(30, Landings) %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')+
coord_flip()
subsidies_by_country %>%
filter(Relative_subsidies <= 1) %>%
top_n(30, `Landed Value`) %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')+
coord_flip()
View(subsidies_by_country)
subsidies_by_country %>%
filter(Relative_subsidies <= 1.5) %>%
top_n(30, `Landed Value`) %>%
ggplot()+
geom_bar(aes(x = forcats::fct_reorder(country_name, Relative_subsidies), y = Relative_subsidies), stat = 'identity')+
coord_flip()
library(tidyverse)
library(bigrquery)
library(DBI)
library(lubridate)
library(dygraphs)
install.packages("dygraphs")
library(tidyverse)
library(bigrquery)
library(DBI)
library(lubridate)
library(dygraphs)
BQ_connection <-  dbConnect(dbi_driver(), dataset = "", project = "ucsb-gfw")
knitr::opts_chunk$set(connection = "BQ_connection", echo = FALSE, message = FALSE, warning = FALSE)
t <- active_vessel_2015 %>%
filter(eez == "China") %>%
mutate(date = lubridate::ymd(date)) %>%
group_by(year, date) %>%
summarise(active_vessels = sum(active_vessels)) %>%
ungroup() %>%
select(-year)
dygraphs::dygraph(xts::xts(t$active_vessels,t$date), main = "Active Chinese vessels inside their own EEZ") %>%
dygraphs::dyRangeSelector(dateWindow = c("2013-01-01", "2015-12-31")) %>%
dySeries(label = "Active vessels", color = "black") %>%
dyShading(from = "2015-02-18", to = "2015-02-24", color = "#CCEBD6") %>%
dyShading(from = "2014-01-31", to = "2014-02-6", color = "#CCEBD6") %>%
dyShading(from = "2013-02-10", to = "2013-02-15", color = "#CCEBD6") %>%
dyShading(from = "2015-05-16", to = "2015-08-01", color = "#FFE6E6") %>%
dyShading(from = "2014-05-16", to = "2014-08-01", color = "#FFE6E6") %>%
dyShading(from = "2013-05-16", to = "2013-08-01", color = "#FFE6E6") %>%
dyRoller(rollPeriod = 3)
t <- active_vessel_2015 %>%
filter(eez == "China") %>%
mutate(date = lubridate::ymd(date)) %>%
group_by(year, date) %>%
summarise(active_vessels = sum(active_vessels)) %>%
ungroup() %>%
select(-year)
dygraphs::dygraph(xts::xts(t$active_vessels,t$date), main = "Active Chinese vessels inside their own EEZ") %>%
dygraphs::dyRangeSelector(dateWindow = c("2013-01-01", "2015-12-31")) %>%
dySeries(label = "Active vessels", color = "black") %>%
dyShading(from = "2015-02-18", to = "2015-02-24", color = "#CCEBD6") %>%
dyShading(from = "2014-01-31", to = "2014-02-6", color = "#CCEBD6") %>%
dyShading(from = "2013-02-10", to = "2013-02-15", color = "#CCEBD6") %>%
dyShading(from = "2015-05-16", to = "2015-08-01", color = "#FFE6E6") %>%
dyShading(from = "2014-05-16", to = "2014-08-01", color = "#FFE6E6") %>%
dyShading(from = "2013-05-16", to = "2013-08-01", color = "#FFE6E6") %>%
dyRoller(rollPeriod = 3)
t <- active_vessel_2015 %>%
filter(eez == "Conflict zone China/Japan/Taiwan") %>%
mutate(date = lubridate::ymd(date)) %>%
group_by(year, date) %>%
summarise(active_vessels = sum(active_vessels)) %>%
ungroup() %>%
select(-year)
dygraphs::dygraph(xts::xts(t$active_vessels,t$date), main = "Active Chinese vessels in Conflict zone China/Japan/Taiwan") %>%
dygraphs::dyRangeSelector(dateWindow = c("2013-01-01", "2015-12-31")) %>%
dySeries(label = "Active vessels", color = "black") %>%
dyShading(from = "2015-02-18", to = "2015-02-24", color = "#CCEBD6") %>%
dyShading(from = "2014-01-31", to = "2014-02-6", color = "#CCEBD6") %>%
dyShading(from = "2013-02-10", to = "2013-02-15", color = "#CCEBD6") %>%
dyShading(from = "2015-05-16", to = "2015-08-01", color = "#FFE6E6") %>%
dyShading(from = "2014-05-16", to = "2014-08-01", color = "#FFE6E6") %>%
dyShading(from = "2013-05-16", to = "2013-08-01", color = "#FFE6E6")
t <- active_vessel_2015 %>%
filter(eez == "Conflict zone China/Japan/Taiwan") %>%
mutate(date = lubridate::ymd(date)) %>%
group_by(year, date) %>%
summarise(active_vessels = sum(active_vessels)) %>%
ungroup() %>%
select(-year)
dygraphs::dygraph(xts::xts(t$active_vessels,t$date), main = "Active Chinese vessels in Conflict zone China/Japan/Taiwan") %>%
dygraphs::dyRangeSelector(dateWindow = c("2013-01-01", "2015-12-31")) %>%
dySeries(label = "Active vessels", color = "black") %>%
dyShading(from = "2015-02-18", to = "2015-02-24", color = "#CCEBD6") %>%
dyShading(from = "2014-01-31", to = "2014-02-6", color = "#CCEBD6") %>%
dyShading(from = "2013-02-10", to = "2013-02-15", color = "#CCEBD6") %>%
dyShading(from = "2015-05-16", to = "2015-08-01", color = "#FFE6E6") %>%
dyShading(from = "2014-05-16", to = "2014-08-01", color = "#FFE6E6") %>%
dyShading(from = "2013-05-16", to = "2013-08-01", color = "#FFE6E6")
t <- active_vessel_2015 %>%
filter(eez == "South Korea") %>%
mutate(date = lubridate::ymd(date)) %>%
group_by(year, date) %>%
summarise(active_vessels = sum(active_vessels)) %>%
ungroup() %>%
select(-year)
dygraphs::dygraph(xts::xts(t$active_vessels,t$date), main = "Active Chinese vessels in South Korea EEZ") %>%
dygraphs::dyRangeSelector(dateWindow = c("2013-01-01", "2015-12-31")) %>%
dySeries(label = "Active vessels", color = "black") %>%
dyShading(from = "2015-02-18", to = "2015-02-24", color = "#CCEBD6") %>%
dyShading(from = "2014-01-31", to = "2014-02-6", color = "#CCEBD6") %>%
dyShading(from = "2013-02-10", to = "2013-02-15", color = "#CCEBD6") %>%
dyShading(from = "2015-05-16", to = "2015-08-01", color = "#FFE6E6") %>%
dyShading(from = "2014-05-16", to = "2014-08-01", color = "#FFE6E6") %>%
dyShading(from = "2013-05-16", to = "2013-08-01", color = "#FFE6E6")
t <- active_vessel_2015 %>%
filter(eez == "South Korea") %>%
mutate(date = lubridate::ymd(date)) %>%
group_by(year, date) %>%
summarise(active_vessels = sum(active_vessels)) %>%
ungroup() %>%
select(-year)
dygraphs::dygraph(xts::xts(t$active_vessels,t$date), main = "Active Chinese vessels in South Korea EEZ") %>%
dygraphs::dyRangeSelector(dateWindow = c("2013-01-01", "2015-12-31")) %>%
dySeries(label = "Active vessels", color = "black") %>%
dyShading(from = "2015-02-18", to = "2015-02-24", color = "#CCEBD6") %>%
dyShading(from = "2014-01-31", to = "2014-02-6", color = "#CCEBD6") %>%
dyShading(from = "2013-02-10", to = "2013-02-15", color = "#CCEBD6") %>%
dyShading(from = "2015-05-16", to = "2015-08-01", color = "#FFE6E6") %>%
dyShading(from = "2014-05-16", to = "2014-08-01", color = "#FFE6E6") %>%
dyShading(from = "2013-05-16", to = "2013-08-01", color = "#FFE6E6")
t <- active_vessel_2015 %>%
filter(is.na(eez)) %>%
mutate(date = lubridate::ymd(date)) %>%
group_by(year, date) %>%
summarise(active_vessels = sum(active_vessels)) %>%
ungroup() %>%
select(-year)
dygraphs::dygraph(xts::xts(t$active_vessels,t$date), main = "Active Chinese vessels in the high seas") %>%
dygraphs::dyRangeSelector(dateWindow = c("2013-01-01", "2015-12-31")) %>%
dySeries(label = "Active vessels", color = "black") %>%
dyShading(from = "2015-02-18", to = "2015-02-24", color = "#CCEBD6") %>%
dyShading(from = "2014-01-31", to = "2014-02-6", color = "#CCEBD6") %>%
dyShading(from = "2013-02-10", to = "2013-02-15", color = "#CCEBD6") %>%
dyShading(from = "2015-05-16", to = "2015-08-01", color = "#FFE6E6") %>%
dyShading(from = "2014-05-16", to = "2014-08-01", color = "#FFE6E6") %>%
dyShading(from = "2013-05-16", to = "2013-08-01", color = "#FFE6E6")
BQ_connection <-  dbConnect(dbi_driver(), dataset = "", project = "high-seas")
NOT_affected_vessels_2015 %>%
ggplot(aes(x = length)) +
geom_histogram(
aes(y = ..density..),
# Histogram with density instead of count on y-axis
binwidth = 5,
colour = "black",
fill = "white"
) +
geom_density(alpha = .2, fill = "lightblue") +
ggtitle('Size Distribution of unaffected vessels') +
theme_bw()
NOT_affected_vessels_2015 %>%
ggplot(aes(x = length)) +
geom_histogram(
aes(y = ..density..),
# Histogram with density instead of count on y-axis
binwidth = 5,
colour = "black",
fill = "white"
) +
geom_density(alpha = .2, fill = "lightblue") +
ggtitle('Size Distribution of unaffected vessels') +
theme_bw()
NOT_affected_vessels_2015 %>%
group_by(general_vessel_type) %>%
count() %>%
arrange(desc(n)) %>%
knitr::kable()
NOT_affected_vessels_2015 %>%
group_by(general_vessel_type) %>%
count() %>%
arrange(desc(n)) %>%
knitr::kable()
displaced_vessels_2015 <- affected_vessels_2015 %>%
filter(!mmsi %in% removed_vessels_2015$mmsi)
BQ_connection <-  dbConnect(dbi_driver(),dataset = "Juan", project = "ucsb-gfw")
if(dbExistsTable(BQ_connection, "chinese_moratorium_displaced_vessels_2015")){
dbRemoveTable(BQ_connection, "chinese_moratorium_displaced_vessels_2015")
dbWriteTable(BQ_connection, "chinese_moratorium_displaced_vessels_2015", displaced_vessels_2015)
} else {dbWriteTable(BQ_connection, "chinese_moratorium_displaced_vessels_2015", displaced_vessels_2015)}
effort_inside <- displaced_effort %>%
filter(eez == "China") %>%
mutate(date = lubridate::ymd(date)) %>%
group_by(year, date) %>%
summarise(fishing_hours = sum(fishing_hours)) %>%
ungroup() %>%
select(-year)
effort_inside <- xts::xts(effort_inside$fishing_hours,effort_inside$date)
effort_outside <- displaced_effort %>%
filter(!is.na(eez) & eez != "China") %>%
mutate(date = lubridate::ymd(date)) %>%
group_by(year, date) %>%
summarise(fishing_hours = sum(fishing_hours)) %>%
ungroup() %>%
select(-year)
effort_outside <- xts::xts(effort_outside$fishing_hours,effort_outside$date)
effort <- cbind(effort_outside,effort_inside)
dygraphs::dygraph(effort, main = "Fishing hours by the displaced fleet before, during, and after moratoria") %>%
dygraphs::dyRangeSelector(dateWindow = c("2015-01-01", "2015-12-31")) %>%
dySeries(name = "..1",label = "Effort in foreign EEZ", color = "blue") %>%
dySeries(name = "..2",label = "Effort inside EEZ", color = "black") %>%
dyShading(from = "2015-02-18", to = "2015-02-24", color = "#CCEBD6") %>%
dyShading(from = "2014-01-31", to = "2014-02-6", color = "#CCEBD6") %>%
dyShading(from = "2013-02-10", to = "2013-02-15", color = "#CCEBD6") %>%
dyShading(from = "2015-05-16", to = "2015-08-01", color = "#FFE6E6") %>%
dyShading(from = "2014-05-16", to = "2014-08-01", color = "#FFE6E6") %>%
dyShading(from = "2013-05-16", to = "2013-08-01", color = "#FFE6E6") %>%
dyLegend(width = 500) %>%
dyRoller(rollPeriod = 3)
effort_inside <- displaced_effort %>%
filter(eez == "China") %>%
mutate(date = lubridate::ymd(date)) %>%
group_by(year, date) %>%
summarise(fishing_hours = sum(fishing_hours)) %>%
ungroup() %>%
select(-year)
effort_inside <- xts::xts(effort_inside$fishing_hours,effort_inside$date)
effort_outside <- displaced_effort %>%
filter(!is.na(eez) & eez != "China") %>%
mutate(date = lubridate::ymd(date)) %>%
group_by(year, date) %>%
summarise(fishing_hours = sum(fishing_hours)) %>%
ungroup() %>%
select(-year)
effort_outside <- xts::xts(effort_outside$fishing_hours,effort_outside$date)
effort <- cbind(effort_outside,effort_inside)
dygraphs::dygraph(effort, main = "Fishing hours by the displaced fleet before, during, and after moratoria") %>%
dygraphs::dyRangeSelector(dateWindow = c("2015-01-01", "2015-12-31")) %>%
dySeries(name = "..1",label = "Effort in foreign EEZ", color = "blue") %>%
dySeries(name = "..2",label = "Effort inside EEZ", color = "black") %>%
dyShading(from = "2015-02-18", to = "2015-02-24", color = "#CCEBD6") %>%
dyShading(from = "2014-01-31", to = "2014-02-6", color = "#CCEBD6") %>%
dyShading(from = "2013-02-10", to = "2013-02-15", color = "#CCEBD6") %>%
dyShading(from = "2015-05-16", to = "2015-08-01", color = "#FFE6E6") %>%
dyShading(from = "2014-05-16", to = "2014-08-01", color = "#FFE6E6") %>%
dyShading(from = "2013-05-16", to = "2013-08-01", color = "#FFE6E6") %>%
dyLegend(width = 500) %>%
dyRoller(rollPeriod = 3)
BQ_connection <-  dbConnect(dbi_driver(),dataset = "", project = "high-seas")
ggmap::ggmap(ggmap::get_map(location = c(125,30,125,30), zoom = 5,  maptype = c("satellite"), source = 'google'))+
geom_point(data = removed_vessels_effort_2015,
aes(x=lon, y=lat, frame = dh), color="red", size = 1)
removed_vessels_effort_2015 <- removed_vessels_effort_2015 %>%
mutate(dh = round_date(timestamp, unit = "hours")) %>%
arrange(dh)
ggmap::ggmap(ggmap::get_map(location = c(125,30,125,30), zoom = 5,  maptype = c("satellite"), source = 'google'))+
geom_point(data = removed_vessels_effort_2015,
aes(x=lon, y=lat, frame = dh), color="red", size = 1)
ggmap::ggmap(ggmap::get_map(location = c(120,30,120,30), zoom = 5,  maptype = c("satellite"), source = 'google'))+
geom_point(data = removed_vessels_effort_2015,
aes(x=lon, y=lat, frame = dh), color="red", size = 1)
p <- ggmap::ggmap(ggmap::get_map(location = c(120,30,120,30), zoom = 5,  maptype = c("satellite"), source = 'google'))+
geom_point(data = removed_vessels_effort_2015,
aes(x=lon, y=lat, frame = dh), color="red", size = 1)
gganimate::gg_animate(p, interval = .2)
gganimate::gg_animate(p, interval = .2)
gganimate::gg_animate(p, interval = .2, "China.mp4")
>>>>>>> Stashed changes
install.packages("adehabitatHR")
library(adehabitatHR)
install.packages("ade4")
library(adehabitatHR)
library(adehabitatHR)
library(ade4)
library(adehabitatHR)
install.packages("ade4")
install.packages("ade4")
library(ade4)
library(adehabitatHR)
library(tidyverse)
library(DBI)
library(bigrquery)
library(DBI)
library(tidyverse)
BQ_connection <- dbConnect(dbi_driver(), dataset = "", project = "ucsb-gfw")
View(colombian_vessels)
colombian_vessels <- colombian_vessels %>%
mutate(mmsi = as.factor(mmsi))
colombian_fleet <- colombian_vessels$mmsi
colombian_fleet <- data_frame(colombian_vessels$mmsi)
colombian_fleet <- colombian_fleet %>%
mutate(mmsi = as.factor(mmsi))
View(colombian_fleet)
coords <- colombian_fleet %>% select(-mmsi)
coordinates(colombian_fleet) <- ~lon+lat
data(puechabonsp)
r <- data(puechabonsp)
library(adehabitatHR)
kud <- kernelUD(puechabonsp$relocs[,1], h="href")
kud
puechabonsp$relocs[,1]
colombian_fleet@data[,1]
colombian_fleet[,1]
ud <- kernelUD(colombian_fleet[,1], h="href")
colombian_fleet[2,1]
colombian_fleet[1,1]
colombian_fleet[1:2,1]
> image(kud)
image(kud)
ud <- kernelUD(colombian_fleet[,1], h="href")
image(ud)
ud <- kernelUD(colombian_fleet[,1], h="LSCV")
kareas <- getverticeshr(ud, 95)
ud <- kernelUD(colombian_fleet[,1], h="href")
image(ud)
kareas <- getverticeshr(ud, 95)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href", extent = 10)
image(ud)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href", extent = 200)
image(ud)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 80, extent = 200)
image(ud)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 20, extent = 3)
image(ud)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 100, extent = 3)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 50, extent = 3)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 56, extent = 3)
image(ud)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 70, extent = 3)
image(ud)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 90, extent = 3)
image(ud)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 90, extent = 4)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 90, extent = 5)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 90, extent = 6)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 100, extent = 6)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 100, extent = 6)
image(ud)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(2)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 100, extent = 2)
image(ud)
kareas <- getverticeshr(ud, 90)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 100, extent = 3)
kareas <- getverticeshr(ud, 90)
kareas <- getverticeshr(ud, 95)
ud <- kernelUD(colombian_fleet[,1], h="href",grid = 500, extent = 3)
kareas <- getverticeshr(ud, 95)
library(ggplot2)
kdareas <- fortify(kareas)
ggplot(kdareas) +
geom_polygon(aes(x=long, y=lat, group = group, fill = id, colour = id),
alpha = .4) +
theme_bw() +
coord_equal()
ggmap::ggmap(ggmap::get_map(location = "Malpelo", zoom = 5,  maptype = c("satellite"), source = 'google'))
ggmap::ggmap(ggmap::get_map(location = "Colombia", zoom = 5,  maptype = c("satellite"), source = 'google'))
ggmap::ggmap(ggmap::get_map(location = c(90,5,90,5), zoom = 5,  maptype = c("satellite"), source = 'google'))
ggmap::ggmap(ggmap::get_map(location = c(-90,5,-90,5), zoom = 5,  maptype = c("satellite"), source = 'google'))
ggmap::ggmap(ggmap::get_map(location = c(-90,5,-90,5), zoom = 5,  maptype = c("satellite"), source = 'google'))+
ggplot(kdareas) +
geom_polygon(aes(x=long, y=lat, group = group, fill = id, colour = id),
alpha = .4) +
theme_bw() +
coord_equal()
ggmap::ggmap(ggmap::get_map(location = c(-90,5,-90,5), zoom = 5,  maptype = c("satellite"), source = 'google'))+
geom_polygon(kdareas, aes(x=long, y=lat, group = group, fill = id, colour = id),
alpha = .4) +
theme_bw() +
coord_equal()
ggmap::ggmap(ggmap::get_map(location = c(-90,5,-90,5), zoom = 5,  maptype = c("satellite"), source = 'google'))+
geom_polygon(aes(x=long, y=lat, group = group, fill = id, colour = id),
alpha = .4, data = kdareas) +
theme_bw() +
coord_equal()
ggmap::ggmap(ggmap::get_map(location = c(-90,5,-90,5), zoom = 4,  maptype = c("satellite"), source = 'google'))+
geom_polygon(aes(x=long, y=lat, group = group, fill = id, colour = id),
alpha = .4, data = kdareas) +
theme_bw() +
coord_equal()
ggmap::ggmap(ggmap::get_map(location = c(-90,5,-90,5), zoom = 2,  maptype = c("satellite"), source = 'google'))+
geom_polygon(aes(x=long, y=lat, group = group, fill = id, colour = id),
alpha = .4, data = kdareas) +
theme_bw() +
coord_equal()
ggmap::ggmap(ggmap::get_map(location = c(-90,5,-90,5), zoom = 3,  maptype = c("satellite"), source = 'google'))+
geom_polygon(aes(x=long, y=lat, group = group, fill = id, colour = id),
alpha = .4, data = kdareas) +
theme_bw() +
coord_equal()
ggmap::ggmap(ggmap::get_map(location = c(-95,5,-95,5), zoom = 3,  maptype = c("satellite"), source = 'google'))+
geom_polygon(aes(x=long, y=lat, group = group, fill = id, colour = id),
alpha = .4, data = kdareas) +
theme_bw() +
coord_equal()
xyz <- as.image.SpatialGridDataFrame(ud[[1]])
contour(xyz, add=TRUE)
image(ud)
xyz <- as.image.SpatialGridDataFrame(ud[[1]])
contour(xyz, add=TRUE)
image(ud[[1]])
xyz <- as.image.SpatialGridDataFrame(ud[[1]])
contour(xyz, add=TRUE)
image(ud[[1:2]])
image(ud[[3]])
image(ud[[3]])
xyz <- as.image.SpatialGridDataFrame(ud[[3]])
contour(xyz, add=TRUE)
image(ud)
avail <- installed.packages()[, 1]
needed <- c("grid", "maptools",  "raster", "adehabitatHR", "adehabitatLT", "ggplot2", "graphics", "gridExtra", "KernSmooth", "lubridate", "mixtools", "mvtnorm", "rgdal", "rgeos", "reshape2", "sp", "spacetime", "stringr", "trajectories", "zoo", "shiny", "knitr", "markdown", "testthat", "shinyBS", "brew", "xtable")
install <- needed[!needed %in% avail]
if (length(install) > 0) {
install.packages(install)
}
install.packages("http://78.47.85.98/rhr_1.2.900.tar.gz", repos = NULL, type = "source")
kd1 <- rhrKDE(datSH[, 2:3])
library(rhr)
kd1 <- rhrKDE(colombian_vessels[, 2:3])
(href <- rhrHref(colombian_vessels[, 2:3]))
kdehref1 <- rhrKDE(colombian_vessels[, 2:3], h = href$h)
plot(kdehref1)
(href <- rhrHref(colombian_vessels[, rev(2:3)]))
kdehref1 <- rhrKDE(colombian_vessels[, rev(2:3)], h = href$h)
plot(kdehref1)
ggmap::ggmap(ggmap::get_map(location = c(-95,5,-95,5), zoom = 3,  maptype = c("satellite"), source = 'google'))+
geom_polygon(aes(x=long, y=lat, group = group, fill = id, colour = id),
alpha = .4, data = kdareas) +
theme_bw() +
coord_equal()
tidy(kdehref1)
broom::tidy(kdehref1)
plot(kdehref1)
fortify(kdehref1)
plot(kdehref1)
